## 22.8.9. C API预处理语句数据结构

预处理语句使用几种数据结构：

* 传递一个 **MYSQL** 连接句柄给 *mysql_stmt_init()* ，得到一个指向 **MYSQL_STMT** 数据结构的指针，即语句句柄。使用这一结构可以做更多的操作。把 **MYSQL_STMT** 指针和语句字符串传递给 *mysql_stmt_prepare()* 以对语句进行预处理。

* 要给预处理语句传递参数，创建一个 **MYSQL_BIND** 结构，并将其和参数一起传递给 *mysql_stmt_bind_param()* 。要接收输出的字段值，创建 **MYSQL_BIND** 结构并将其传递给 *mysql_stmt_bind_result()* 。

* **MYSQL_TIME** 结构用来传递时间相关数据。


下面的讨论详细描述各数据类型。相关范例，参考 [22.8.11.10，mysql_stmt_execute()]() 以及 [22.8.11.11，mysql_stmt_fetch()]() 。

* **MYSQL_STMT**

该结构时预处理语句的句柄。通过 *mysql_stmt_init()* 创建。该句柄用于对该语句的后续操作，直到调用了 *mysql_stmt_close()* ，这此后该句柄就失效了。

该结构没有哪个成员被设计成让应用程序直接使用。应用程序也不应该拷贝该结构。对于拷贝的可用性没有任何保证。

多个语句句柄可以关联到同一条连接上。数量极限取决于可用的系统资源。

* **MYSQL_BIND**

该结构既可用于语句的输入（向服务端传递数据），也可用于输出（从服务端返回结果）：

	* 对于输入，使用 **MYSQL_BIND** 结构调用 *mysql_stmt_bind_param()* 将参数绑定到缓存上，以供 *mysql_stmt_execute()* 使用。
	
	* 对于输出，使用 **MYSQL_BIND** 结构调用 *mysql_stmt_bind_result()* 将缓存绑定到数据集字段上，以供 *mysql_stmt_fetch()* 使用。
	
	