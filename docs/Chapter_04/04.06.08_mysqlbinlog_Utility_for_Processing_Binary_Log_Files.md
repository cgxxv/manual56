### 4.6.8. mysqlbinlog — 处理二进制日志文件的工具


服务器的二进制日志文件以“事件(events)”的形式记录了对数据库内容进行变更的操作。服务器以二进制格式记录该日志文件。使用 [mysqlbinlog](#) 程序，可以以文本格式查看日志文件的内容。也可以使用 [mysqlbinlog](#) 来查看主从复制时从服务器的延迟日志(relay log)文件，因为它与二进制日志文件是相同的格式。更多关于二进制日志和延迟日志的内容，详见[5.2.4 二进制日志][05.02.04] 和 [16.2.2 主从复制延迟和状态日志][16.02.02]。

[mysqlbinlog](#) 调用如下：

```shell
shell> mysqlbinlog [options] log_file ...
```

例如，如显示二进制日志文件binlog.000003的内容，则使用如下命令：

```shell
shell> mysqlbinlog binlog.0000003
```

输出的内容包括 binlog.000003 中包含的事件。对于基于语句 (statement-based) 的日志， 事件信息包括SQL语句、服务器的ID、SQL语句开始执行的时间，执行消耗的时间等等；对于基于行 (row-based) 的日志，事件信息记录的是行的变更而不是SQL语句。关于日志模式，参见 [16.1.2 主从复制格式][16.01.02]

事件之前的注释头提供一些额外的信息，例如：

```shell
# at 141
#100309  9:28:36 server id 123  end_log_pos 245
  Query thread_id=3350  exec_time=11  error_code=0
```

第一行，at 后面的数字表明在二进制日志文件中事件的起始位置。

第二行，以日前和时间开头，表明该语句在服务器上的执行时间和事件在哪形成的。在主从复制中，该时间戳是传递给从服务器的。`server id` 是形成该事件的服务器的`server_id`；`end_log_pos` 表明下个事件的起始位置(也就是当前事件结束位置+1)，；`thread_id` 表明是哪个线程执行了该事件；`exec_time` 在主服务器上，表示该事件执行所消耗的时间，在从服务器上，则是不同的，它表示该事件在从服务器上执行结束时间减去在主服务器上该时间开始执行时间，这个差别可以作为查看从服务器落后主服务器多长时间的一个指示器；`error_code` 表明执行该事件的结果，0意味着没有出现错误。

[mysqlbinlog](#) 的输出可以被重新执行(例如，把输出作为 [mysql][04.05.01] 的输入)，重新执行日志文件中的语句。当服务器crash时，对恢复操作非常有用，有关实际的例子，接下来会会介绍，也可参见[7.5 ”使用二进制日志进行增量修复“][07.05.00]。

通常情况下，使用 [mysqlbinlog](#) 来读取本地MySQL服务器的二进制日志文件，也可以通过指定选项 --read-from-remote-server 来读取远程服务器的二进制日志文件。如果想读取远程服务器的二进制日志文件，需要指明连接到远程服务器所需要的连接参数，包括 --host, --password, --port, --protocol, --socket, 和 --user，如果没有指定选项 --read-from-remote-server，则这些选项是忽略不计的。

[mysqlbinlog](#) 支持的选项如表格所示，即可以在命令行指定也可以在配置文件中 [mysqlbinlog] 和 [client] 选项组中指定，[mysqlbinlog](#) 也支持处理配置文件的选项，详见 [4.2.3.4 “影响配置文件处理的命令行选项”][04.02.03.04]

Table 4.14. **mysqlbinlog** Options

<table summary="mysqlbinlog Options" border="0">
    <thead>
        <tr>
            <th scope="col">
                Format
            </th>
            <th scope="col">
                Option File
            </th>
            <th scope="col">
                Description
            </th>
            <th scope="col">
                Introduced
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_base64-output">
                    --base64-output=value
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_base64-output">
                    base64-output
                </a>
            </td>
            <td>
                Print binary log entries using base-64 encoding
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_bind-address">
                    --bind-address=ip_address
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_bind-address">
                    bind-address
                </a>
            </td>
            <td>
                Use the specified network interface to connect to the MySQL Server
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_binlog-row-event-max-size">
                    --binlog-row-event-max-size=#
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_binlog-row-event-max-size">
                    binlog-row-event-max-size
                </a>
            </td>
            <td>
                Binary log max event size
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_character-sets-dir">
                    --character-sets-dir=path
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_character-sets-dir">
                    character-sets-dir
                </a>
            </td>
            <td>
                The directory where character sets are installed
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_database">
                    --database=db_name
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_database">
                    database
                </a>
            </td>
            <td>
                List entries for just this database
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_debug">
                    --debug[=debug_options]
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_debug">
                    debug
                </a>
            </td>
            <td>
                Write a debugging log
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_debug-check">
                    --debug-check
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_debug-check">
                    debug-check
                </a>
            </td>
            <td>
                Print debugging information when the program exits
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_debug-info">
                    --debug-info
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_debug-info">
                    debug-info
                </a>
            </td>
            <td>
                Print debugging information, memory and CPU statistics when the program
                exits
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_default-auth">
                    --default-auth=plugin
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_default-auth">
                    default-auth=plugin
                </a>
            </td>
            <td>
                The authentication plugin to use
            </td>
            <td>
                5.6.2
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_disable-log-bin">
                    --disable-log-bin
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_disable-log-bin">
                    disable-log-bin
                </a>
            </td>
            <td>
                Disable binary logging
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_exclude-gtids">
                    --exclude-gtids=gtid_set
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_exclude-gtids">
                    exclude-gtids
                </a>
            </td>
            <td>
                Do not show any of the groups in the GTID set provided
            </td>
            <td>
                5.6.5
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_force-if-open">
                    --force-if-open
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_force-if-open">
                    force-if-open
                </a>
            </td>
            <td>
                Read binary log files even if open or not closed properly
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_force-read">
                    --force-read
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_force-read">
                    force-read
                </a>
            </td>
            <td>
                If mysqlbinlog reads a binary log event that it does not recognize, it
                prints a warning
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_help">
                    --help
                </a>
            </td>
            <td>
                &nbsp;
            </td>
            <td>
                Display help message and exit
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_hexdump">
                    --hexdump
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_hexdump">
                    hexdump
                </a>
            </td>
            <td>
                Display a hex dump of the log in comments
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_host">
                    --host=host_name
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_host">
                    host
                </a>
            </td>
            <td>
                Connect to the MySQL server on the given host
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                --idempotent
            </td>
            <td>
                idempotent
            </td>
            <td>
                Cause the server to use idempotent mode while processing binary log updates
                from this session only
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_include-gtids">
                    --include-gtids=gtid_set
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_include-gtids">
                    include-gtids
                </a>
            </td>
            <td>
                Show only the groups in the GTID set provided
            </td>
            <td>
                5.6.5
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_local-load">
                    --local-load=path
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_local-load">
                    local-load
                </a>
            </td>
            <td>
                Prepare local temporary files for LOAD DATA INFILE in the specified directory
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="option-file-options.html#option_general_login-path">
                    --login-path=name
                </a>
            </td>
            <td>
                &nbsp;
            </td>
            <td>
                Read login path options from .mylogin.cnf
            </td>
            <td>
                5.6.6
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_offset">
                    --offset=#
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_offset">
                    offset
                </a>
            </td>
            <td>
                Skip the first N entries in the log
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_password">
                    --password[=password]
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_password">
                    password
                </a>
            </td>
            <td>
                The password to use when connecting to the server
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_plugin-dir">
                    --plugin-dir=path
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_plugin-dir">
                    plugin-dir=path
                </a>
            </td>
            <td>
                The directory where plugins are located
            </td>
            <td>
                5.6.2
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_port">
                    --port=port_num
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_port">
                    port
                </a>
            </td>
            <td>
                The TCP/IP port number to use for the connection
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_protocol">
                    --protocol=type
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_protocol">
                    protocol
                </a>
            </td>
            <td>
                The connection protocol to use
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_raw">
                    --raw
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_raw">
                    raw
                </a>
            </td>
            <td>
                Write events in raw (binary) format to output files
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_read-from-remote-master">
                    --read-from-remote-master=type
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_read-from-remote-master">
                    read-from-remote-master
                </a>
            </td>
            <td>
                Read the binary log from a MySQL master rather than reading a local log
                file
            </td>
            <td>
                5.6.5
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_read-from-remote-server">
                    --read-from-remote-server
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_read-from-remote-server">
                    read-from-remote-server
                </a>
            </td>
            <td>
                Read binary log from MySQL server rather than local log file
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_result-file">
                    --result-file=name
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_result-file">
                    result-file
                </a>
            </td>
            <td>
                Direct output to the given file
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_server-id">
                    --server-id=id
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_server-id">
                    server-id
                </a>
            </td>
            <td>
                Extract only those events created by the server having the given server
                ID
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_set-charset">
                    --set-charset=charset_name
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_set-charset">
                    set-charset
                </a>
            </td>
            <td>
                Add a SET NAMES charset_name statement to the output
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_short-form">
                    --short-form
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_short-form">
                    short-form
                </a>
            </td>
            <td>
                Display only the statements contained in the log
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_skip-gtids">
                    --skip-gtids[=true|false]
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_skip-gtids">
                    skip-gtids
                </a>
            </td>
            <td>
                Do not show any GTIDs; not recommended in production
            </td>
            <td>
                5.6.5
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_socket">
                    --socket=path
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_socket">
                    socket
                </a>
            </td>
            <td>
                For connections to localhost
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_start-datetime">
                    --start-datetime=datetime
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_start-datetime">
                    start-datetime
                </a>
            </td>
            <td>
                Read binary log from first event with timestamp equal to or later than
                datetime argument
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_start-position">
                    --start-position=#
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_start-position">
                    start-position
                </a>
            </td>
            <td>
                Read binary log from first event with position equal to or greater than
                argument
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_stop-datetime">
                    --stop-datetime=datetime
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_stop-datetime">
                    stop-datetime
                </a>
            </td>
            <td>
                Stop reading binary log at first event with timestamp equal to or greater
                than datetime argument
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_stop-never">
                    --stop-never
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_stop-never">
                    stop-never
                </a>
            </td>
            <td>
                Stay connected to server after reading last binary log file
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_stop-never-slave-server-id">
                    --stop-never-slave-server-id=#
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_stop-never-slave-server-id">
                    stop-never-slave-server-id
                </a>
            </td>
            <td>
                Slave server ID to report when connecting to server
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_stop-position">
                    --stop-position=#
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_stop-position">
                    stop-position
                </a>
            </td>
            <td>
                Stop reading binary log at first event with position equal to or greater
                than argument
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_to-last-log">
                    --to-last-log
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_to-last-log">
                    to-last-log
                </a>
            </td>
            <td>
                Do not stop at the end of requested binary log from a MySQL server, but
                rather continue printing to end of last binary log
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_user">
                    --user=user_name,
                </a>
            </td>
            <td>
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_user">
                    user
                </a>
            </td>
            <td>
                MySQL user name to use when connecting to server
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_verbose">
                    --verbose
                </a>
            </td>
            <td>
                &nbsp;
            </td>
            <td>
                Reconstruct row events as SQL statements
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_verify-binlog-checksum">
                    --verify-binlog-checksum
                </a>
            </td>
            <td>
                &nbsp;
            </td>
            <td>
                Verify checksums in binary log
            </td>
            <td>
                5.6.1
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlbinlog.html#option_mysqlbinlog_version">
                    --version
                </a>
            </td>
            <td>
                &nbsp;
            </td>
            <td>
                Display version information and exit
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
    </tbody>
</table>

* --help, -?

	显示帮助信息并退出

* --base64-output=value

	该选项决定是否使用 [BINLOG][13.07.06.01] 语句以 base-64 编码方式来显示编码字符串，该选项的取值如下：（大小写不敏感)

	- AUTO("automatic") 或者 UNSPEC("unspecified"): 有需要的时候自动显示 [BINLOG][13.07.06.01] 语句（即，对于格式描述事件和行事件)，如果没有指定选项 --base64-output 的值，则默认的行为是 --base64-output=AUTO。
	
	> 注意：
	> 如果想使用 [mysqlbinlog](#) 的输出来重新执行二进制日志文件的内容，则 自动 [BINLOG][13.07.06.01] 显示是唯一的安全行为，其它的值仅仅用于调试或者测试的目的因为他们产生的输出可能不包含所有可执行的事件。
	
	- NEVER : [BINLOG][13.07.06.01] 语句从不输出，如果一个行事件必须使用 [BINLOG][13.07.06.01]，则 [mysqlbinlog](#)带着错误信息退出
	- DECODE-ROWS ： 告诉 [mysqlbinlog](#) 行事件进行加密并并以带注释的SQL语句形式显示，需要指定选项 --verbose。像 NEVER 一样，DECODE-ROWS 压制了 [BINLOG][13.07.06.01] 语句的显示，但是不像 NEVER，如果有行事件的话，不以错误退出。

	有关 --base64-output 和 --verbose 在行事件输出上的影响，参见 [4.6.8.2 “mysqlbinlog 行事件输出”](#4.6.8.2)。

* --bind-address=*ip_address*

	在有多个网卡的计算机上，该选项可以指定使用哪个网卡连接MySQL服务器

	该选项从MySQL5.6.1开始支持的

* --binlog-row-event-max-size=N

	<table summary="Options for binlog-row-event-max-size" border="1">
    <colgroup>
        <col class="title">
            <col class="vt">
                <col class="vd">
                    <col class="v">
    </colgroup>
    <tbody>
        <tr>
            <td scope="row">
                <span class="bold">
                    <strong>
                        Command-Line Format
                    </strong>
                </span>
            </td>
            <td colspan="3">
                <code class="literal">
                    --binlog-row-event-max-size=#
                </code>
            </td>
        </tr>
        <tr>
            <td scope="row">
                <span class="bold">
                    <strong>
                        Option-File Format
                    </strong>
                </span>
            </td>
            <td colspan="3">
                <code class="literal">
                    binlog-row-event-max-size
                </code>
            </td>
        </tr>
        <tr>
            <td scope="row" rowspan="5">
                &nbsp;
            </td>
            <td colspan="3">
                <span class="bold">
                    <strong>
                        Permitted Values
                    </strong>
                </span>
            </td>
        </tr>
        <tr>
            <td scope="row">
                <span class="bold">
                    <strong>
                        Platform Bit Size
                    </strong>
                </span>
            </td>
            <td colspan="2">
                <code class="literal">
                    64
                </code>
            </td>
        </tr>
        <tr>
            <td scope="row">
                <span class="bold">
                    <strong>
                        Type
                    </strong>
                </span>
            </td>
            <td colspan="2">
                <code class="literal">
                    numeric
                </code>
            </td>
        </tr>
        <tr>
            <td scope="row">
                <span class="bold">
                    <strong>
                        Default
                    </strong>
                </span>
            </td>
            <td colspan="2">
                <code class="literal">
                    4294967040
                </code>
            </td>
        </tr>
        <tr>
            <td scope="row">
                <span class="bold">
                    <strong>
                        Range
                    </strong>
                </span>
            </td>
            <td colspan="2">
                <code class="literal">
                    256 .. 18446744073709547520
                </code>
            </td>
        </tr>
    	</tbody>
	</table>

	指定基于行的日志事件的最大容量，以字节为单位，行按组划分成事件节省空间，该值必须是256的倍数，默认是4GB

* --character-sets-dir=path

	字符集安装的目录，参见 [10.5 “字符集设置”][10.05.00]

* --database=db_name, -d db_name

	该选项让 [mysqlbinglong](#) 输出指定数据库 db_name 的二进制日志条目

	选项 --database 对于 [mysqlbinlog](#) 来讲就如同  --binlog-do-db 对于 [mysqld][04.03.01]，但是仅可以指定一个数据库，如果 --database 指定多次，仅最后一次有效。

	该选项的影响取决于日志的模式是基于语句的(statement-based) 还是基于行的(row-based),同样，--binlog-do-db 的影响取决于日志的模式是基于语句的(statement-based) 还是基于行的(row-based)。

	**Statement-based logging**： 则--database 选项的作用如下：

	- 如果 *db_name* 是默认的数据库，无论是更改数据库 *db_name* 中的表或其它数据库中的表，全部语句输出
	- 如果 *db_name* 不是默认是数据库，即使 *db_name* 中的变更语句也不输出
	-  对于语句 [CREATE DATABASE][13.01.10]， [ALTER DATABASE][13.01.01] 和 [DROP DATABASE][13.01.21] 会抛出异常。当决定是否输出语句的时候，对于数据库的 *created* , *altered* , 或者是 *dropped* 操作被认为是在默认的数据库上

	假设执行如下语句生成基于语句的二进制日志文件：

	```sql
	INSERT INTO test.t1 (i) VALUES(100);
	INSERT INTO db2.t2 (j)  VALUES(200);
	USE test;
	INSERT INTO test.t1 (i) VALUES(101);
	INSERT INTO t1 (i)      VALUES(102);
	INSERT INTO db2.t2 (j)  VALUES(201);
	USE db2;
	INSERT INTO test.t1 (i) VALUES(103);
	INSERT INTO db2.t2 (j)  VALUES(202);
	INSERT INTO t2 (j)      VALUES(203);
	```

	mysqlbinlog --database=test 不输出前2个 [INSERT][13.02.05] 语句，因为没有指定默认的数据库，它输出 [USE test][13.08.04] 后的3个 [INSERT][13.02.05] 语句， 但不是 [USE db2][13.08.04] 后的3个 [INSERT][13.02.05] 语句

	mysqlbinlog --database=db2 不输出前2个 [INSERT][13.02.05] 语句，因为没有指定默认的数据库，也不输出 [USE test][13.08.04] 后的3个[INSERT][13.02.05] 语句，但是输出 [USE db2][13.08.04] 后的3个 [INSERT][13.02.05] 语句


	**Row-based logging** ： [mysqlbinlog](#) 仅输出数据库 *db_name* 中表变更的条目，默认的数据库无效，假如上面的这个二进制日志文件是基于行的而不是基于语句的，则 `mysqlbinlog --database=test` 只输出在 test 数据库里对 t1 的更改条目，不考虑 [USE][13.08.04] 指定了哪个数据库或者是默认的数据库


	如果服务器的 binlog_format 设置成 MIXED并且你想指定选项 --database 来使用 [mysqlbinlog](#) ，你需要确保被变更的表是 [USE][13.08.04] 选定的数据库里的表(特别是，没有跨数据库关联的表)。

	在 MySQL 5.6.10 以前，--database 选项对于 GTID-enabled 的 MySQL 服务器来讲是无效的

* --debug[=debug_options], -# [debug_options]

	写debug日志，典型的 *debug_options* 的值是 'd:t:o,file_name' ， 默认的是 'd:t:o,/tmp/mysqlbinlog.trace'

* --debug-check

	当程序退出的时候输出一些调试信息

* --debug-info

	当程序退出的时候，输出调试信息及内存和CPU消耗的统计信息

* --default-auth=plugin

	客户端所用的验证插件，详见 [6.3.7 “插件式验证”][06.03.07]

	该选项是MySQL 5.6.2加进来的

* --disable-log-bin, -D

	disable 二进制日志，如果指定了 --to-last-log 选项并且将输出发送到同一台服务器上，则该选项非常有用，它避免了无限循环。当服务器crash后进行数据恢复的时候，使用该选项可以避免重复执行日志里的语句

	该选项需要你有 SUPER 的权限，它使 [mysqlbinlong](#) 在输出时包含 `SET sql_log_bin = 0`语句以使后来的输出disable 二进制日志。[SET][13.07.04] 语句是无效的除非有SUPER的权限 

* --exclude-gtids=gtid_set

	不包含任何 *gtid_set* 中列出来的组，MySQL 5.6.6增加的选项

* --force-if-open, -F

	读取二进制日志文件即使他们已经打开了或者没有正常关闭

* --force-read, -f

	使用该选项，如果 [mysqlbinlog](#) 读取了不能识别的二进制日志事件，则输出警告信息，忽略该事件然后继续执行；如果不指定该选项，则 [mysqlbinlog](#) 此种情况先回结束执行

* --hexdump, -H

	以十六进制输出日志内容，详见[4.6.8.1 “**mysqlbinlong** 十六进制输出”](#4.6.8.1)，十六进制是输出对于主从复制调试非常有用

* --host=host_name, -h host_name

	获取指定主机上MySQL服务器的二进制日志文件

* --include-gtids=gtid_set
	
	仅显示 *gtid_set* 中列出来的组，MySQL 5.6.5增加

* --local-load=path, -l path

	给指定目录的 [LOAD DATA INFILE][13.02.06] 准备本地临时文件

	> 重要：
	> 这些临时文件不能被 [mysqlbinlong](#) 或者其它 MySQL程序自动删除

* --offset=N, -o N

	跳过日志里的前N个条目

* --password[=password], -p[password]

	连接MySQL服务器时所用的密码。如果使用短选项格式(-p)，则在选项和密码直接不能有空格；如果选项 --password 或者 -p 后面没有指定密码值，则 [mysqlbinlog](#) 提示输入

	在命令行中指定密码是不安全的，参见[6.1.2.1 “终端用户密码安全指定”][06.01.02.01]，可以使用配置文件来避免在命令行上指定密码

* --plugin-dir=path

	插件所在目录，如果使用了选项 --default-auth 指定了验证插件但是 [mysqlbinlog](#) 没有找到它，则需要指定该选项

	该选项是MySQL 5.6.2增加的

* --port=port_num, -P port_num

	连接到远程服务器所用的TCP/IP端口号

* --protocol={TCP|SOCKET|PIPE|MEMORY}

	连接到服务器所用的协议，当其它的连接参数需要指定一个连接协议的时候该选项将非常有用，参见 [4.2.2 “连接到MySQL服务器”][04.02.02]

* --raw

	默认情况下，[mysqlbinlong](#) 读取二进制日志文件然后以文本格式输出事件，选项 --raw 告诉 [mysqlbinlong](#) 以原来的二进制形式输出，使用该选项时需要指定 --read-from-remote-server 选项因为日志文件是从远程服务器请求的，[mysqlbinlog] 对于读取的每个文件写一个输出文件，选项 --raw 可以用来备份二进制日志文件，如果指定 --stop-never 选项，则备份操作一直存在因为 [mysqlbinlong](#) 一直连接MySQL服务器。默认情况下，备份文件与原来的文件以相同的文件名在同一目录下，通过选项 --result-file 可以更改输出文件的文件名，更多信息，参见[4.6.8.3 “使用 **mysqlbinlong** 备份二进制日志文件”](#4.6.8.3)

	该选项是 MySQL 5.6.0增加的

* --read-from-remote-master=type

	带着 COM_BINLOG_DUMP 或者 COM_BINLOG_DUMP_GTID 命令读取MySQL二进制日志文件，响应的选项值设置为BINLOG-DUMP-NON-GTIDS 或者 BINLOG-DUMP-GTIDS，如果 --read-from-remote-master=BINLOG-DUMP-GTIDS 和 --exclude-gtids 结合使用，主服务器上的事务信息被过滤掉，避免不必要的网络负担

	该选择是 MySQL 5.6.5增加的

* --read-from-remote-server, -R

	读取远程服务器的日志文件而不是读取本地的，如果没有指定该选项，则其它的相关选项被忽略，这些选项包括 --host, --password, --port, --protocol, --socket, 和 --user 

	该选项要求远程的服务器正在运行，它只对远程服务器的二进制日志文件有效，不包括延迟日志文件

	从MySQL 5.6.5 起，该选项类似于 --read-from-remote-master=BINLOG-DUMP-NON-GTIDS

* --result-file=name, -r name

	如果没有选项 --raw，该选项指明 [mysqlbinlong](#) 的输出文件；如果指定选项 --raw，[mysqlbinlog](#)对于每一个来自服务器的二进制文件在当前目录以与原文件相同的名字输出一个二进制文件，此种情况下，选项 --result-file 被认为是一个输出文件名的前缀

* --server-id=id

	只显示指定服务器ID的服务器创建的事件

* --server-id-bits=N

	仅使用 --server-id 的前N个位来标志服务器，如果 [mysqld][04.03.01] 的 server-id-bits 少于32位并且用户数据在非常重要的位存储，则将选项 -server-id-bits 设置为32可以是数据可见

	该选项只在有MySQL Cluster功能的版本上，或者是由  MySQL Cluster sources 编译的

* --set-charset=charset_name

	在输出中增加 `SET NAMES charset_name` 语句指明处理日志文件所用的字符集

* --short-form, -s

	仅显示日志中的语句，不显示其他信息或者基于行的事件。该选项仅仅为了测试，在生成环境中不能使用该选项

* --skip-gtids[=(true|false)]

	不显示任何的 GTIDs，在生成环境中不推荐 MySQL 5.6.5增加的

* --socket=path, -S path

	对于localhost连接，指定所用的 Unix Socket，或者Windows环境下，所使用的命名管道

* --start-datetime=datetime

	读取日志中事件的时间等于 datetime 或比它大的，*datetime* 是相对于运行 [mysqlbinlong](#) 所在机器的时区设置，该值的数据类型必须是 [DATETIME][11.03.01] 或者 [TIMESTAMP][11.03.01]，例如：

	```shell
	shell> mysqlbinlog --start-datetime="2005-12-25 11:25:56" binlog.000003
	```

	该选项对于实时恢复非常有用，详见[7.3 “备份和恢复策略的例子”][07.03.00]

* --start-position=N, -j N

	从事件的位置等于或者大于N开始读取日志文件，该选项适用于命令行中的第一个日志文件

	该选项对于实时恢复非常有用，详见[7.3 “备份和恢复策略的例子”][07.03.00]


* --stop-never

	该选项和 --read-from-remote-server 一起使用，它告诉 [mysqlbinlog](#) 持续和服务器的连接，否则在最后一个文件传输完毕后 [mysqlbinlong](#) 退出，--stop-never 意味着 -to-last-log ，因此命令行上只需要指定第一个要传输的文件

	--stop-never 通常和 --raw 一起做在线二进制日志备份，也可以不和 --raw 一起使用，连续以文本形式输出日志事件像生成时一样

	该选项是 MySQL5.6.0 增加的

* --stop-never-slave-server-id=id

	 指定选项 --stop-never ，当连接到MySQL服务器时 [mysqlbinlog](#) 报告一个服务器ID 65535， --stop-never-slave-server-id 显示指明所报告的服务器id，可以避免和从服务器或者另一个 [mysqlbinlong](#) 进程ID相冲突，详见[4.6.8.4 “指定mysqlbinlong Server ID”](#4.6.8.4)

	该选项从MySQL 5.6.0增加

* --stop-position=N

	在事件的位置大于或等于N的时候停止读取日志，该选项适用于命令行中指定的最后一个日志文件

* --to-last-log, -t

	对MySQL服务器最后一个日志请求完成后也不停止，而是继续直到最后日志文件结束。如果将输出发送到同一台MySQL服务器上，这将导致死循环，该选项需要 --read-from-remote-server

* --user=user_name, -u user_name

	连接到远程MySQL服务器所用的用户名

* --verbose, -v

	重建行事件并且以SQL语句形式显示他们，如果指定该选项2次，则输出包括数据类型的注释信息和一些元数据

	关于 --base64-output 和 --verbose 对于行事件输出影响的例子，详见[4.6.8.2 “mysqlbinlong 行事件输出”](#4.6.8.2)

* --verify-binlog-checksum, -c

	检测二进制文件的校验和，该选项是MySQL 5.6.1增加的

* --version, -V

	显示版本信息并退出

	在MySQL 5.6.1 之前，[mysqlbinlog](#) 版本号显示3.3，MySQL5.6.11之后，显示3.4(Bug #15894381, Bug #67643)


	可以使用 --var_name=value 语法来设置接下来的选项值

* open_files_limit

	指明打开的文件描述符的个数


可以使用管道来将 [mysqlbinlog](#) 输出到 [mysql][04.05.01]客户端来执行二进制日志文件中包含的事件。该技术用来做数据恢复当服务器crash的时候（参见[7.5 实时增量恢复使用二进制日志文件][07.05.00])，例如：

```shell
shell> mysqlbinlog binlog.000001 | mysql -u root -p
```
或者

```shell
shell> mysqlbinlog binlog.[0-9]* | mysql -u root -p
```

如果使用 [mysqlbinlong](#) 产生的输出包含 [BLOB][11.4.3] 类型值，当 [mysql][04.05.01] 客户端处理他们的时候将会出现问题，则在调用 [mysql][04.05.01]时指定选项 --binary-mode 

如果想更改日志中的语句(如删除不想执行的语句)，则可以将 [mysqlbinlong](#) 输出到文本文件。编辑日志文件之后，由 [mysql][04.05.01] 来执行日志文件：

```shell
shell> mysqlbinlog binlog.000001 > tmpfile
shell> ... edit tmpfile ...
shell> mysql -u root -p < tmpfile
```

当调用 [mysqlbinlong](#) 时指定了 --start-position 选项，则仅显示事件的偏移量大于或等于该值的事件(给定的位置必须匹配一个时间的位置)，
	

如果MySQL服务器上有不止一个二进制日志需要执行，则安全的方式是使用一个服务器连接来处理所有的文件，下面是一个可能不安全的例子：

```shell
shell> mysqlbinlog binlog.000001 | mysql -u root -p # DANGER!!
shell> mysqlbinlog binlog.000002 | mysql -u root -p # DANGER!!
```

如果第一个日志文件包含 [CREATE TEMPORARY TABLE][13.01.17] 语句并且第二个日志文件包含使用该临时文件的语句，则使用多个连接来处理多个二进制日志文件可能会引起问题，当第一个 [mysql][04.05.01] 进程结束的时候，服务器删除了临时表，当第二个 [mysql][04.05.01] 进程尝试使用这个表的时候，服务器报告 “unknown table”。

为了避免这样的问题出现，使用一个 [mysql][04.05.01] 进程来处理所有你想处理的二进制日志文件，一个例子如下：

```shell
shell> mysqlbinlog binlog.000001 binlog.000002 | mysql -u root -p
```

另一种方法是将所有的日志写到一个文件里然后处理这个文件：

```shell
shell> mysqlbinlog binlog.000001 >  /tmp/statements.sql
shell> mysqlbinlog binlog.000002 >> /tmp/statements.sql
shell> mysql -u root -p -e "source /tmp/statements.sql"
```

[mysqlbinlog](#) 可能产生重新执行 [LOAD DATA INFILE][13.02.06] 的操作但是没有原来的数据。[mysqlbinlog](#) 将数据复制到一个临时文件里，然后写一个指向该文件的 [LOAD DATA LOCAL INFILE][13.02.06] 语句，这些文件的默认目录是系统指定的，如果想显示的指明该目录，则使用--local-load 选项

因为 [mysqlbinlog] 将 [LOAD DATA INFILE][13.02.06] 语句转换成 [LOAD DATA LOCAL INFILE][13.02.06] 语句(也就是，加了local)，处理该语句的客户端和服务器都需要开启 LOCAL 功能，参见[6.1.6 “LOAD DATA LOCAL 的安全问题”][06.01.06]。

>警告
>[LOAD DATA LOCAL][13.02.06] 语句所创建的临时文件并不是自动删除的因为直到实际执行这些语句的时候他们都是需要的，你需要手动删除这些临时文件当你不再需要这些语句日志的时候，这些文件可以在临时文件夹里找到，文件名类似 original_file_name-#-#。



#### [4.6.8.1. mysqlbinlog 十六进制格式输出](#4.6.8.1)

 --hexdump 选项使 [mysqlbinlog](#) 以十六进制的形式输出日志文件的内容：

```shell
shell> mysqlbinlog --hexdump master-bin.000001
```

十六进制的输出包括以 # 开始的注释行，因此这个命令的输出可能会像这样：

```sql
/*!40019 SET @@session.max_insert_delayed_threads=0*/;
/*!50003 SET @OLD_COMPLETION_TYPE=@@COMPLETION_TYPE,COMPLETION_TYPE=0*/;
# at 4
#051024 17:24:13 server id 1  end_log_pos 98
# Position  Timestamp   Type   Master ID        Size      Master Pos    Flags
# 00000004 9d fc 5c 43   0f   01 00 00 00   5e 00 00 00   62 00 00 00   00 00
# 00000017 04 00 35 2e 30 2e 31 35  2d 64 65 62 75 67 2d 6c |..5.0.15.debug.l|
# 00000027 6f 67 00 00 00 00 00 00  00 00 00 00 00 00 00 00 |og..............|
# 00000037 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 |................|
# 00000047 00 00 00 00 9d fc 5c 43  13 38 0d 00 08 00 12 00 |.......C.8......|
# 00000057 04 04 04 04 12 00 00 4b  00 04 1a                |.......K...|
#       Start: binlog v 4, server v 5.0.15-debug-log created 051024 17:24:13
#       at startup
ROLLBACK;
```

十六进制的输出包含的内容如下列表所示，格式有可能改变，更多关于二进制格式的内容，详见[MySQL Internals: The Binary Log](https://dev.mysql.com/doc/internals/en/binary-log.html)

* Position: 在日志文件中 byte 位置
* Timestamp: 事件时间戳，在上面输出的例子中，'9d fc 5c 43' 是 '051024 17:24:13' 的十六进制表示形式
* Type: 事件类型码，在上面的例子输出中，'0f' 代表 FORMAT_DESCRIPTION_EVENT，如下的表格显示了所有可能的类型码：

	<table summary="This table lists event type codes" border="1">
    <thead>
        <tr>
            <th scope="col">
                Type
            </th>
            <th scope="col">
                Name
            </th>
            <th scope="col">
                Meaning
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td scope="row">
                <code class="literal">
                    00
                </code>
            </td>
            <td>
                <code class="literal">
                    UNKNOWN_EVENT
                </code>
            </td>
            <td>
                This event should never be present in the log.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    01
                </code>
            </td>
            <td>
                <code class="literal">
                    START_EVENT_V3
                </code>
            </td>
            <td>
                This indicates the start of a log file written by MySQL 4 or earlier.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    02
                </code>
            </td>
            <td>
                <code class="literal">
                    QUERY_EVENT
                </code>
            </td>
            <td>
                The most common type of events. These contain statements executed on the
                master.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    03
                </code>
            </td>
            <td>
                <code class="literal">
                    STOP_EVENT
                </code>
            </td>
            <td>
                Indicates that master has stopped.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    04
                </code>
            </td>
            <td>
                <code class="literal">
                    ROTATE_EVENT
                </code>
            </td>
            <td>
                Written when the master switches to a new log file.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    05
                </code>
            </td>
            <td>
                <code class="literal">
                    INTVAR_EVENT
                </code>
            </td>
            <td>
                Used for
                <code class="literal">
                    AUTO_INCREMENT
                </code>
                values or when the
                <a class="link" href="information-functions.html#function_last-insert-id">
                    <code class="literal">
                        LAST_INSERT_ID()
                    </code>
                </a>
                function is used in the statement.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    06
                </code>
            </td>
            <td>
                <code class="literal">
                    LOAD_EVENT
                </code>
            </td>
            <td>
                Used for
                <a class="link" href="load-data.html" title="13.2.6.&nbsp;LOAD DATA INFILE Syntax">
                    <code class="literal">
                        LOAD DATA INFILE
                    </code>
                </a>
                in MySQL 3.23.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    07
                </code>
            </td>
            <td>
                <code class="literal">
                    SLAVE_EVENT
                </code>
            </td>
            <td>
                Reserved for future use.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    08
                </code>
            </td>
            <td>
                <code class="literal">
                    CREATE_FILE_EVENT
                </code>
            </td>
            <td>
                Used for
                <a class="link" href="load-data.html" title="13.2.6.&nbsp;LOAD DATA INFILE Syntax">
                    <code class="literal">
                        LOAD DATA INFILE
                    </code>
                </a>
                statements. This indicates the start of execution of such a statement.
                A temporary file is created on the slave. Used in MySQL 4 only.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    09
                </code>
            </td>
            <td>
                <code class="literal">
                    APPEND_BLOCK_EVENT
                </code>
            </td>
            <td>
                Contains data for use in a
                <a class="link" href="load-data.html" title="13.2.6.&nbsp;LOAD DATA INFILE Syntax">
                    <code class="literal">
                        LOAD DATA INFILE
                    </code>
                </a>
                statement. The data is stored in the temporary file on the slave.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    0a
                </code>
            </td>
            <td>
                <code class="literal">
                    EXEC_LOAD_EVENT
                </code>
            </td>
            <td>
                Used for
                <a class="link" href="load-data.html" title="13.2.6.&nbsp;LOAD DATA INFILE Syntax">
                    <code class="literal">
                        LOAD DATA INFILE
                    </code>
                </a>
                statements. The contents of the temporary file is stored in the table
                on the slave. Used in MySQL 4 only.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    0b
                </code>
            </td>
            <td>
                <code class="literal">
                    DELETE_FILE_EVENT
                </code>
            </td>
            <td>
                Rollback of a
                <a class="link" href="load-data.html" title="13.2.6.&nbsp;LOAD DATA INFILE Syntax">
                    <code class="literal">
                        LOAD DATA INFILE
                    </code>
                </a>
                statement. The temporary file should be deleted on the slave.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    0c
                </code>
            </td>
            <td>
                <code class="literal">
                    NEW_LOAD_EVENT
                </code>
            </td>
            <td>
                Used for
                <a class="link" href="load-data.html" title="13.2.6.&nbsp;LOAD DATA INFILE Syntax">
                    <code class="literal">
                        LOAD DATA INFILE
                    </code>
                </a>
                in MySQL 4 and earlier.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    0d
                </code>
            </td>
            <td>
                <code class="literal">
                    RAND_EVENT
                </code>
            </td>
            <td>
                Used to send information about random values if the
                <a class="link" href="mathematical-functions.html#function_rand">
                    <code class="literal">
                        RAND()
                    </code>
                </a>
                function is used in the statement.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    0e
                </code>
            </td>
            <td>
                <code class="literal">
                    USER_VAR_EVENT
                </code>
            </td>
            <td>
                Used to replicate user variables.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    0f
                </code>
            </td>
            <td>
                <code class="literal">
                    FORMAT_DESCRIPTION_EVENT
                </code>
            </td>
            <td>
                This indicates the start of a log file written by MySQL 5 or later.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    10
                </code>
            </td>
            <td>
                <code class="literal">
                    XID_EVENT
                </code>
            </td>
            <td>
                Event indicating commit of an XA transaction.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    11
                </code>
            </td>
            <td>
                <code class="literal">
                    BEGIN_LOAD_QUERY_EVENT
                </code>
            </td>
            <td>
                Used for
                <a class="link" href="load-data.html" title="13.2.6.&nbsp;LOAD DATA INFILE Syntax">
                    <code class="literal">
                        LOAD DATA INFILE
                    </code>
                </a>
                statements in MySQL 5 and later.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    12
                </code>
            </td>
            <td>
                <code class="literal">
                    EXECUTE_LOAD_QUERY_EVENT
                </code>
            </td>
            <td>
                Used for
                <a class="link" href="load-data.html" title="13.2.6.&nbsp;LOAD DATA INFILE Syntax">
                    <code class="literal">
                        LOAD DATA INFILE
                    </code>
                </a>
                statements in MySQL 5 and later.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    13
                </code>
            </td>
            <td>
                <code class="literal">
                    TABLE_MAP_EVENT
                </code>
            </td>
            <td>
                Information about a table definition. Used in MySQL 5.1.5 and later.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    14
                </code>
            </td>
            <td>
                <code class="literal">
                    PRE_GA_WRITE_ROWS_EVENT
                </code>
            </td>
            <td>
                Row data for a single table that should be created. Used in MySQL 5.1.5
                to 5.1.17.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    15
                </code>
            </td>
            <td>
                <code class="literal">
                    PRE_GA_UPDATE_ROWS_EVENT
                </code>
            </td>
            <td>
                Row data for a single table that needs to be updated. Used in MySQL 5.1.5
                to 5.1.17.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    16
                </code>
            </td>
            <td>
                <code class="literal">
                    PRE_GA_DELETE_ROWS_EVENT
                </code>
            </td>
            <td>
                Row data for a single table that should be deleted. Used in MySQL 5.1.5
                to 5.1.17.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    17
                </code>
            </td>
            <td>
                <code class="literal">
                    WRITE_ROWS_EVENT
                </code>
            </td>
            <td>
                Row data for a single table that should be created. Used in MySQL 5.1.18
                and later.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    18
                </code>
            </td>
            <td>
                <code class="literal">
                    UPDATE_ROWS_EVENT
                </code>
            </td>
            <td>
                Row data for a single table that needs to be updated. Used in MySQL 5.1.18
                and later.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    19
                </code>
            </td>
            <td>
                <code class="literal">
                    DELETE_ROWS_EVENT
                </code>
            </td>
            <td>
                Row data for a single table that should be deleted. Used in MySQL 5.1.18
                and later.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    1a
                </code>
            </td>
            <td>
                <code class="literal">
                    INCIDENT_EVENT
                </code>
            </td>
            <td>
                Something out of the ordinary happened. Added in MySQL 5.1.18.
            </td>
        </tr>
    </tbody>
	</table>

* Master ID: 创建该事件的主服务器的ID
* Size: 事件的大小，以字节计算
* Master Pos: 在原始的主服务器的日志文件里，下一个时间是位置
* Flags: 16 个flags。当前，如下的flags在使用，其余的保留以备后用
	<table summary="This table lists flag " border="1">
    
    <thead>
        <tr>
            <th scope="col">
                Flag
            </th>
            <th scope="col">
                Name
            </th>
            <th scope="col">
                Meaning
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td scope="row">
                <code class="literal">
                    01
                </code>
            </td>
            <td>
                <code class="literal">
                    LOG_EVENT_BINLOG_IN_USE_F
                </code>
            </td>
            <td>
                Log file correctly closed. (Used only in
                <code class="literal">
                    FORMAT_DESCRIPTION_EVENT
                </code>
                .) If this flag is set (if the flags are, for example,
                <code class="literal">
                    '01 00'
                </code>
                ) in a
                <code class="literal">
                    FORMAT_DESCRIPTION_EVENT
                </code>
                , the log file has not been properly closed. Most probably this is because
                of a master crash (for example, due to power failure).
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    02
                </code>
            </td>
            <td>
                &nbsp;
            </td>
            <td>
                Reserved for future use.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    04
                </code>
            </td>
            <td>
                <code class="literal">
                    LOG_EVENT_THREAD_SPECIFIC_F
                </code>
            </td>
            <td>
                Set if the event is dependent on the connection it was executed in (for
                example,
                <code class="literal">
                    '04 00'
                </code>
                ), for example, if the event uses temporary tables.
            </td>
        </tr>
        <tr>
            <td scope="row">
                <code class="literal">
                    08
                </code>
            </td>
            <td>
                <code class="literal">
                    LOG_EVENT_SUPPRESS_USE_F
                </code>
            </td>
            <td>
                Set in some circumstances when the event is not dependent on the default
                database.
            </td>
        </tr>
    </tbody>
	</table>



#### [4.6.8.2 mysqlbinlog 行事件输出](#4.6.8.2)

如下的例子指明了怎样使用 [mysqlbinlong](#) 来显示行事件，这些事件对应着 WRITE_ROWS_EVENT, UPDATE_ROWS_EVENT, 和 DELETE_ROWS_EVEN 类型码，--base64-output=DECODE-ROWS 和 --verbose 选项可以影响行事件的输出。

假设服务器使用基于行的二进制日志格式，然后你执行了如下这些语句：

```sql
CREATE TABLE t
(
  id   INT NOT NULL,
  name VARCHAR(20) NOT NULL,
  date DATE NULL
) ENGINE = InnoDB;

START TRANSACTION;
INSERT INTO t VALUES(1, 'apple', NULL);
UPDATE t SET name = 'pear', date = '2009-01-01' WHERE id = 1;
DELETE FROM t WHERE id = 1;
COMMIT;
```

默认情况下，[mysqlbinlog](#) 使用 [BINLOG][13.07.06.01] 语句以base-64加密字符串输出，省略其余的行，上述语句的行事件的输出如下：

```shell
shell> mysqlbinlog log_file
...
# at 218
#080828 15:03:08 server id 1  end_log_pos 258   Write_rows: table id 17 flags: STMT_END_F

BINLOG '
fAS3SBMBAAAALAAAANoAAAAAABEAAAAAAAAABHRlc3QAAXQAAwMPCgIUAAQ=
fAS3SBcBAAAAKAAAAAIBAAAQABEAAAAAAAEAA//8AQAAAAVhcHBsZQ==
'/*!*/;
...
# at 302
#080828 15:03:08 server id 1  end_log_pos 356   Update_rows: table id 17 flags: STMT_END_F

BINLOG '
fAS3SBMBAAAALAAAAC4BAAAAABEAAAAAAAAABHRlc3QAAXQAAwMPCgIUAAQ=
fAS3SBgBAAAANgAAAGQBAAAQABEAAAAAAAEAA////AEAAAAFYXBwbGX4AQAAAARwZWFyIbIP
'/*!*/;
...
# at 400
#080828 15:03:08 server id 1  end_log_pos 442   Delete_rows: table id 17 flags: STMT_END_F

BINLOG '
fAS3SBMBAAAALAAAAJABAAAAABEAAAAAAAAABHRlc3QAAXQAAwMPCgIUAAQ=
fAS3SBkBAAAAKgAAALoBAAAQABEAAAAAAAEAA//4AQAAAARwZWFyIbIP
'/*!*/;
```

如果想以 “伪SQL”语句形式查看行事件，则指定选项 --verbose 或者 -v来调用 [mysqlbinlog](#) ，输出将包含以 ### 开始的行：

```shell
shell> mysqlbinlog -v log_file
...
# at 218
#080828 15:03:08 server id 1  end_log_pos 258   Write_rows: table id 17 flags: STMT_END_F

BINLOG '
fAS3SBMBAAAALAAAANoAAAAAABEAAAAAAAAABHRlc3QAAXQAAwMPCgIUAAQ=
fAS3SBcBAAAAKAAAAAIBAAAQABEAAAAAAAEAA//8AQAAAAVhcHBsZQ==
'/*!*/;
### INSERT INTO test.t
### SET
###   @1=1
###   @2='apple'
###   @3=NULL
...
# at 302
#080828 15:03:08 server id 1  end_log_pos 356   Update_rows: table id 17 flags: STMT_END_F

BINLOG '
fAS3SBMBAAAALAAAAC4BAAAAABEAAAAAAAAABHRlc3QAAXQAAwMPCgIUAAQ=
fAS3SBgBAAAANgAAAGQBAAAQABEAAAAAAAEAA////AEAAAAFYXBwbGX4AQAAAARwZWFyIbIP
'/*!*/;
### UPDATE test.t
### WHERE
###   @1=1
###   @2='apple'
###   @3=NULL
### SET
###   @1=1
###   @2='pear'
###   @3='2009:01:01'
...
# at 400
#080828 15:03:08 server id 1  end_log_pos 442   Delete_rows: table id 17 flags: STMT_END_F

BINLOG '
fAS3SBMBAAAALAAAAJABAAAAABEAAAAAAAAABHRlc3QAAXQAAwMPCgIUAAQ=
fAS3SBkBAAAAKgAAALoBAAAQABEAAAAAAAEAA//4AQAAAARwZWFyIbIP
'/*!*/;
### DELETE FROM test.t
### WHERE
###   @1=1
###   @2='pear'
###   @3='2009:01:01'
```

指定 --verbose 或者 -v 2次，显示数据类型和每列的元数据信息，在每列的后面包含每列变更的注释信息：

```shell
shell> mysqlbinlog -vv log_file
...
# at 218
#080828 15:03:08 server id 1  end_log_pos 258   Write_rows: table id 17 flags: STMT_END_F

BINLOG '
fAS3SBMBAAAALAAAANoAAAAAABEAAAAAAAAABHRlc3QAAXQAAwMPCgIUAAQ=
fAS3SBcBAAAAKAAAAAIBAAAQABEAAAAAAAEAA//8AQAAAAVhcHBsZQ==
'/*!*/;
### INSERT INTO test.t
### SET
###   @1=1 /* INT meta=0 nullable=0 is_null=0 */
###   @2='apple' /* VARSTRING(20) meta=20 nullable=0 is_null=0 */
###   @3=NULL /* VARSTRING(20) meta=0 nullable=1 is_null=1 */
...
# at 302
#080828 15:03:08 server id 1  end_log_pos 356   Update_rows: table id 17 flags: STMT_END_F

BINLOG '
fAS3SBMBAAAALAAAAC4BAAAAABEAAAAAAAAABHRlc3QAAXQAAwMPCgIUAAQ=
fAS3SBgBAAAANgAAAGQBAAAQABEAAAAAAAEAA////AEAAAAFYXBwbGX4AQAAAARwZWFyIbIP
'/*!*/;
### UPDATE test.t
### WHERE
###   @1=1 /* INT meta=0 nullable=0 is_null=0 */
###   @2='apple' /* VARSTRING(20) meta=20 nullable=0 is_null=0 */
###   @3=NULL /* VARSTRING(20) meta=0 nullable=1 is_null=1 */
### SET
###   @1=1 /* INT meta=0 nullable=0 is_null=0 */
###   @2='pear' /* VARSTRING(20) meta=20 nullable=0 is_null=0 */
###   @3='2009:01:01' /* DATE meta=0 nullable=1 is_null=0 */
...
# at 400
#080828 15:03:08 server id 1  end_log_pos 442   Delete_rows: table id 17 flags: STMT_END_F

BINLOG '
fAS3SBMBAAAALAAAAJABAAAAABEAAAAAAAAABHRlc3QAAXQAAwMPCgIUAAQ=
fAS3SBkBAAAAKgAAALoBAAAQABEAAAAAAAEAA//4AQAAAARwZWFyIbIP
'/*!*/;
### DELETE FROM test.t
### WHERE
###   @1=1 /* INT meta=0 nullable=0 is_null=0 */
###   @2='pear' /* VARSTRING(20) meta=20 nullable=0 is_null=0 */
###   @3='2009:01:01' /* DATE meta=0 nullable=1 is_null=0 */
```

指定选项 --base64-output=DECODE-ROWS 来调用[mysqlbinlog](#)，可以对于行事件压缩 [BINLOG][13.07.06.01] 语句，有点类似于 --base64-output=NEVER ，但是当行事件不存在的时候程序不退出。--base64-output=DECODE-ROWS 和 --verbose 结合使用可以方便的以SQL语句形式查看行事件：

```shell
shell> mysqlbinlog -v --base64-output=DECODE-ROWS log_file
...
# at 218
#080828 15:03:08 server id 1  end_log_pos 258   Write_rows: table id 17 flags: STMT_END_F
### INSERT INTO test.t
### SET
###   @1=1
###   @2='apple'
###   @3=NULL
...
# at 302
#080828 15:03:08 server id 1  end_log_pos 356   Update_rows: table id 17 flags: STMT_END_F
### UPDATE test.t
### WHERE
###   @1=1
###   @2='apple'
###   @3=NULL
### SET
###   @1=1
###   @2='pear'
###   @3='2009:01:01'
...
# at 400
#080828 15:03:08 server id 1  end_log_pos 442   Delete_rows: table id 17 flags: STMT_END_F
### DELETE FROM test.t
### WHERE
###   @1=1
###   @2='pear'
###   @3='2009:01:01'
```

>注意
>如果想重新执行[mysqlbinlog](#) 的输出则不能压缩 [BINLOG][13.07.06.01] 语句

由 --verbose 选项产生的行事件SQL语句比响应的 [BINLOG][13.07.06.01] 语句更容易读，然而，它们不能准确的对应着形成该事件的SQL语句，有如下限制：

* 原来的列名称丢失了，代之以 @N ，N表示列的序列号
* 在二进制日志文件里，字符集的信息是不可用的，影响字符列的显示：

	- 二进制和非二进制字符串直接没有区别([BINARY][11.04.02] 、 [CHAR][11.04.01] 、[VARBINARY][11.04.02] [VARCHAR][11.04.01] [BLOB ][11.04.03] [TEXT][11.04.03])。对于固定长度的字符串输出 STRING 数据类型，对于可变长度的字符串输出 VARSTRING 数据类型
	- 对于多字节数据，在二进制日志文件里不包含每个字符的最大字节数，因此字符串类型的长度是按字节计算而不是按字符，例如，STRING(4)将是如下2种类型值中的一个：
	
	```shell
	CHAR(4) CHARACTER SET latin1
	CHAR(2) CHARACTER SET ucs2
	```

	- 由于事件类型 UPDATE_ROWS_EVENT 的存储格式，带有 WHERE 的[UPDATE][13.02.11] 语句在 SET 语句之前显示




#### [4.6.8.3 Using mysqlbinlog to Back Up Binary Log Files](#4.6.8.3)
#### [4.6.8.4 Specifying the mysqlbinlog Server ID](#4.6.8.4)

[04.02.03.04]: ./04.02.03_Specifying_Program_Options.md#4.2.3.4
[04.03.01]:./04.03.01_mysqld_The_MySQL_Server.md
[04.05.01]:./04.05.01_mysql_The_MySQL_Command-Line_Tool.md
[05.02.04]:../Chapter_05/05.02.04_The_Binary_Log.md
[06.01.02.01]:./Chapter_06/06.01.02_Keeping_Passwords_Secure.md#6.1.2.4
[06.01.06]:./Chapter_06/06.01.06_Security_Issues_with_LOAD_DATA_LOCAL.md
[07.03.00]:../Chapter_07/07.03.00_Example_Backup_and_Recovery_Strategy.md
[07.05.00]:../Chapter_07/07.05.00_Point-in-Time_Incremental_Recovery_Using_the_Binary_Log.md
[10.05.00]:../Chapter_10/10.05.00_Character_Set_Configuration.md
[11.03.01]:../Chapter_11/11.03.01_The_DATE_DATETIME_and_TIMESTAMP_Types.md
[11.04.01]:../Chapter_11/11.04.01_The_CHAR_and_VARCHAR_Types.md
[11.04.02]:../Chapter_11/11.04.02_The_BINARY_and_VARBINARY_Types.md
[11.04.03]:../Chapter_11/11.04.03_The_BLOB_and_TEXT_Types.md
[13.01.01]:../Chapter_13/13.01.01_ALTER_DATABASE_Syntax.md
[13.01.10]:../Chapter_13/13.01.10_CREATE_DATABASE_Syntax.md
[13.01.21]:../Chapter_13/13.01.21_DROP_DATABASE_Syntax.md
[13.02.11]:../Chapter_13/13.02.11_UPDATE_Syntax.md
[13.01.17]:../Chapter_13/13.01.17_CREATE_TABLE_Syntax.md
[13.02.05]:../Chapter_13/13.02.05_INSERT_Syntax.md
[13.02.06]:../Chapter_13/13.02.06_LOAD_DATA_INFILE_Syntax.md
[13.07.06.01]:../Chapter_13/13.07.06_Other_Administrative_Statements.md#13.7.6.1
[13.08.04]:../Chapter_13/13.08.04_USE_Syntax.md
[16.01.02]:../Chapter_16/16.01.02_Replication_Formats.md
[16.02.02]:../Chapter_16/16.02.02_Replication_Relay_and_Status_Logs.md
