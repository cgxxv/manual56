###  mysqlhotcopy — 数据库备份程序

[mysqlhotcopy](#) 是一个perl脚本，最初是由Tim Bunce所写并贡献的。它使用[FLUSH TABLES](13.7.6.3) ， [LOCK TABLES](13.3.5) cp 和 scp 来做数据库备份。它是一个非常快速的方式来备份数据库或者是表，但是它只能和数据库数据目录在同一个机器上。

[mysqlhotcopy](#) 仅可以用来备份 MyISAM 表和 ARCHIVE 表，运行在Unix系统上。

使用[mysqlhotcopy](#)， 必须有要备份的这个数据文件的的读的权限，要备份表的 [SELECT](6.2.1)权限，[RELOAD](6.2.1) 权限（可以执行[FLUSH TABLES)][13.7.6.3])，[LOCK TABLES][6.2.1]权限（可以锁表）。

```shell
shell> mysqlhotcopy db_name [/path/to/new_directory]
shell> mysqlhotcopy db_name_1 ... db_name_n /path/to/new_directory
```

备份匹配某一正则表达式的表：

```shell
shell> mysqlhotcopy db_name./regex/
```

对应表明的正则表达式可以使用(~)符号来取反：

```shell
shell> mysqlhotcopy db_name./~regex/
```

[mysqlhotcopy](#) 支持如下这些选项，可以在命令行中指定选项也可以在配置文件中**[mysqlhotcopy]** 和 **[client]** 选项组里指定，更多关于配置文件的信息，详见[4.2.2.3 “使用配置文件”][4.2.2.3]

Table 4.16. **mysqlhotcopy** Options

<table summary="mysqlhotcopy Options" border="1">
    <colgroup>
        <col class="format">
            <col class="config_file">
                <col class="description">
    </colgroup>
    <thead>
        <tr>
            <th scope="col">
                Format
            </th>
            <th scope="col">
                Option File
            </th>
            <th scope="col">
                Description
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_addtodest">
                    --addtodest
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_addtodest">
                    addtodest
                </a>
            </td>
            <td>
                Do not rename target directory (if it exists); merely add files to it
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_allowold">
                    --allowold
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_allowold">
                    allowold
                </a>
            </td>
            <td>
                Do not abort if a target exists; rename it by adding an _old suffix
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_checkpoint">
                    --checkpoint=db_name.tbl_name
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_checkpoint">
                    checkpoint
                </a>
            </td>
            <td>
                Insert checkpoint entries
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_chroot">
                    --chroot=path
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_chroot">
                    chroot
                </a>
            </td>
            <td>
                Base directory of the chroot jail in which mysqld operates
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_debug">
                    --debug
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_debug">
                    debug
                </a>
            </td>
            <td>
                Write a debugging log
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_dryrun">
                    --dryrun
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_dryrun">
                    dryrun
                </a>
            </td>
            <td>
                Report actions without performing them
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_flushlog">
                    --flushlog
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_flushlog">
                    flushlog
                </a>
            </td>
            <td>
                Flush logs after all tables are locked
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_help">
                    --help
                </a>
            </td>
            <td>
                &nbsp;
            </td>
            <td>
                Display help message and exit
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_host">
                    --host=host_name
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_host">
                    host
                </a>
            </td>
            <td>
                Connect to the MySQL server on the given host
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_keepold">
                    --keepold
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_keepold">
                    keepold
                </a>
            </td>
            <td>
                Do not delete previous (renamed) target when done
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_method">
                    --method
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_method">
                    method
                </a>
            </td>
            <td>
                The method for copying files
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_noindices">
                    --noindices
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_noindices">
                    noindices
                </a>
            </td>
            <td>
                Do not include full index files in the backup
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_old_server">
                    --old_server
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_old_server">
                    old_server
                </a>
            </td>
            <td>
                Connect to server that does not support FLUSH TABLES tbl_list WITH READ
                LOCK
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_password">
                    --password[=password]
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_password">
                    password
                </a>
            </td>
            <td>
                The password to use when connecting to the server
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_port">
                    --port=port_num
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_port">
                    port
                </a>
            </td>
            <td>
                The TCP/IP port number to use for the connection
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_quiet">
                    --quiet
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_quiet">
                    quiet
                </a>
            </td>
            <td>
                Be silent except for errors
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_regexp">
                    --regexp
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_regexp">
                    regexp
                </a>
            </td>
            <td>
                Copy all databases with names that match the given regular expression
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_resetmaster">
                    --resetmaster
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_resetmaster">
                    resetmaster
                </a>
            </td>
            <td>
                Reset the binary log after locking all the tables
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_resetslave">
                    --resetslave
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_resetslave">
                    resetslave
                </a>
            </td>
            <td>
                Reset the master.info file after locking all the tables
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_socket">
                    --socket=path
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_socket">
                    socket
                </a>
            </td>
            <td>
                For connections to localhost
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_tmpdir">
                    --tmpdir=path
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_tmpdir">
                    tmpdir
                </a>
            </td>
            <td>
                The temporary directory
            </td>
        </tr>
        <tr>
            <td scope="row">
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_user">
                    --user=user_name,
                </a>
            </td>
            <td>
                <a class="link" href="mysqlhotcopy.html#option_mysqlhotcopy_user">
                    user
                </a>
            </td>
            <td>
                MySQL user name to use when connecting to server
            </td>
        </tr>
    </tbody>
</table>

* --help, -?

	显示帮助信息后退出

* --addtodest

	不重命名目标目录(如果存在），仅把文件添加进去

*  --allowold

	如果目标文件存在，则不终止程序运行，加前缀 _old来重命令文件

*  --checkpoint=db_name.tbl_name

	给指定的数据库 *db_name* 和表 *tbl_name* 增加检测点入口

* --chroot=path

	

* --debug

	开启调试模式

*  --dryrun, -n

	报告操作不执行

*  --flushlog

	当所有的表都锁定后,flush 日志

*  --host=host_name, -h host_name





[4.2.2.3]:./
[6.2.1]:../Chapter_6
[13.3.5]:../Chapter_13
[13.7.6.3]:../Chapter_13/